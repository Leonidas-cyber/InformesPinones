<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informes - Congregación Arrayanes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="StylesInformacion.css">
    <link rel="stylesheet" href="stylesAdm.css">
    <link rel="stylesheet" href="cardsStyles.css">
    <link rel="stylesheet" href="modalelim.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>

    <div class="loading-screen">
        <div class="loading-content">
            <h2>Cargando Informes</h2>
            <div class="loading-spinner"></div>
            <p>Conectando con Firebase...</p>
        </div>
    </div>

    <div class="app-container">
        <div class="filters">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Buscar publicador...">
            </div>
            <div class="select-wrapper">
                <select id="groupFilter">
                    <option value="">Todos los grupos</option>
                    <!-- Se llenará dinámicamente -->
                </select>
            </div>
            <div class="select-wrapper">
                <select id="roleFilter">
                    <option value="">Todos los roles</option>
                    <option value="Publicador">Publicador</option>
                    <option value="Precursor Auxiliar">Precursor Auxiliar</option>
                    <option value="Precursor Regular">Precursor Regular</option>
                </select>
            </div>
        </div>

        <div class="stat-cards" id="summaryStats">
            <!-- Stats cards se generarán aquí -->
        </div>
        
        <div class="informes-grid" id="informesList">
            <!-- Informes se generarán aquí -->
        </div>
    </div>
    
    <div class="login-modal" id="loginModal">
        <!-- Contenido del modal de login -->
    </div>

    <div class="login-modal" id="registerModal">
        <!-- Contenido del modal de registro -->
    </div>

    <div class="login-modal" id="resetPasswordModal">
        <!-- Contenido del modal de recuperación de contraseña -->
    </div>

    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  
    <script>
   document.addEventListener("DOMContentLoaded", () => {
    fetch("/menuadm.html")
        .then(response => {
            if (!response.ok) throw new Error("Menu not found");
            return response.text();
        })
        .then(menuHtml => {
            const menuContainer = document.createElement('div');
            menuContainer.id = 'menu-container';
            menuContainer.innerHTML = menuHtml;
            document.body.insertBefore(menuContainer, document.body.firstChild);
            
            // Asegurar que los scripts del menú se ejecuten
            const scripts = menuContainer.querySelectorAll('script');
            scripts.forEach(script => {
                const newScript = document.createElement('script');
                if (script.src) {
                    newScript.src = script.src;
                } else {
                    newScript.textContent = script.textContent;
                }
                document.body.appendChild(newScript);
            });
        })
        .catch(error => {
            console.error("Error loading menu:", error);
        });
});
        </script>
    
    <!-- Scripts adicionales del segundo documento -->
<!-- <script src="/ScriptLogin.js"></script>-->   
 <!--<script src="/script.js"></script>-->
    <script src="/ScriptLogin.js" type="module"></script>
    <script src="/informes.js" type="module"></script>
    <script src="/script.js" type="module"></script>
    <script src="/mobile.js"></script>

    <div class="login-modal" id="editReportModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Editar Informe</h2>
            <form id="editReportForm">
                <!-- Dentro del formulario de edición -->
                <div class="form-group">
                    <label for="editName">Nombre:</label>
                    <input type="text" id="editName" name="editName" required>
                </div>
                <div class="form-group">
                    <label for="editHours">Horas:</label>
                    <input type="number" id="editHours" step="0.1" required>
                </div>
                <div class="form-group">
                    <label for="editStudies">Cursos Bíblicos:</label>
                    <input type="number" id="editStudies" required>
                </div>
                <div class="form-group">
                    <label for="editGroup">Grupo:</label>
                    <select id="editGroup" required>
                        ${Array.from(uniqueGroups).map(g => `<option value="${g}">${g}</option>`).join('')}
                    </select>
                </div>
                <div class="form-group">
                    <label for="editRole">Rol:</label>
                    <select id="editRole" required>
                        <option value="Publicador">Publicador</option>
                        <option value="Precursor Auxiliar">Precursor Auxiliar</option>
                        <option value="Precursor Regular">Precursor Regular</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editDate">Fecha:</label>
                    <input type="date" id="editDate" required>
                </div>
                <div class="form-group">
                    <label for="editObservations">Notas:</label>
                    <textarea id="editObservations" rows="3"></textarea>
                </div>
                <div class="form-buttons">
                    <button type="submit" class="submit-btn">Guardar Cambios</button>
                </div>
            </form>
        </div>
    </div>

    <div id="toast-container" class="toast-container"></div>
    <!-- Modal de Confirmación -->
<div id="confirmModal" class="modal">
    <div class="modal-content">
      <p id="confirmMessage"></p>
      <div class="modal-buttons">
        <button class="btn-secondary" id="confirmCancel">Cancelar</button>
        <button class="btn-danger" id="confirmDelete">Eliminar</button>
      </div>
    </div>
  </div>

</body>
</html>